import{e as P,b as I,g as et,c as D,d as Pe,_ as bt,a as Mt,h as yt}from"./@babel-Da5y1lT-.js";import{c as Ee}from"./classnames-BK5ccKcQ.js";import{R as tt}from"./rc-resize-observer-C1qgBqSl.js";import{v as V,E as xt,u as ge,i as Ge}from"./rc-util-BCCD6kXK.js";import{r as t}from"./react-CeYxiRmC.js";import"./react-is-DcfIKM1A.js";import{r as Ue}from"./react-dom-Bwn-WS6j.js";var rt=t.forwardRef(function(e,s){var i=e.height,l=e.offsetY,d=e.offsetX,a=e.children,u=e.prefixCls,m=e.onInnerResize,S=e.innerProps,b=e.rtl,g=e.extra,n={},c={display:"flex",flexDirection:"column"};return l!==void 0&&(n={height:i,position:"relative",overflow:"hidden"},c=P(P({},c),{},I(I(I(I(I({transform:"translateY(".concat(l,"px)")},b?"marginRight":"marginLeft",-d),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(tt,{onResize:function(R){var f=R.offsetHeight;f&&m&&m()}},t.createElement("div",et({style:c,className:Ee(I({},"".concat(u,"-holder-inner"),u)),ref:s},S),a,g)))});rt.displayName="Filler";function Et(e){var s=e.children,i=e.setRef,l=t.useCallback(function(d){i(d)},[]);return t.cloneElement(s,{ref:l})}function wt(e,s,i,l,d,a,u){var m=u.getKey;return e.slice(s,i+1).map(function(S,b){var g=s+b,n=a(S,g,{style:{width:l}}),c=m(S);return t.createElement(Et,{key:c,setRef:function(R){return d(S,R)}},n)})}function zt(e,s,i){var l=e.length,d=s.length,a,u;if(l===0&&d===0)return null;l<d?(a=e,u=s):(a=s,u=e);var m={__EMPTY_ITEM__:!0};function S(R){return R!==void 0?i(R):m}for(var b=null,g=Math.abs(l-d)!==1,n=0;n<u.length;n+=1){var c=S(a[n]),h=S(u[n]);if(c!==h){b=n,g=g||c!==S(u[n+1]);break}}return b===null?null:{index:b,multiple:g}}function _t(e,s,i){var l=t.useState(e),d=D(l,2),a=d[0],u=d[1],m=t.useState(null),S=D(m,2),b=S[0],g=S[1];return t.useEffect(function(){var n=zt(a||[],e||[],s);(n==null?void 0:n.index)!==void 0&&g(e[n.index]),u(e)},[e]),[b]}var Ze=(typeof navigator>"u"?"undefined":Pe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const nt=function(e,s){var i=t.useRef(!1),l=t.useRef(null);function d(){clearTimeout(l.current),i.current=!0,l.current=setTimeout(function(){i.current=!1},50)}var a=t.useRef({top:e,bottom:s});return a.current.top=e,a.current.bottom=s,function(u){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=u<0&&a.current.top||u>0&&a.current.bottom;return m&&S?(clearTimeout(l.current),i.current=!1):(!S||i.current)&&d(),!i.current&&S}};function Lt(e,s,i,l,d){var a=t.useRef(0),u=t.useRef(null),m=t.useRef(null),S=t.useRef(!1),b=nt(s,i);function g(v,M){V.cancel(u.current),a.current+=M,m.current=M,!b(M)&&(Ze||v.preventDefault(),u.current=V(function(){var y=S.current?10:1;d(a.current*y),a.current=0}))}function n(v,M){d(M,!0),Ze||v.preventDefault()}var c=t.useRef(null),h=t.useRef(null);function R(v){if(e){V.cancel(h.current),h.current=V(function(){c.current=null},2);var M=v.deltaX,y=v.deltaY,H=v.shiftKey,L=M,W=y;(c.current==="sx"||!c.current&&H&&y&&!M)&&(L=y,W=0,c.current="sx");var X=Math.abs(L),x=Math.abs(W);c.current===null&&(c.current=l&&X>x?"x":"y"),c.current==="y"?g(v,W):n(v,L)}}function f(v){e&&(S.current=v.detail===m.current)}return[R,f]}function Dt(e,s,i,l){var d=t.useMemo(function(){return[new Map,[]]},[e,i.id,l]),a=D(d,2),u=a[0],m=a[1],S=function(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,c=u.get(g),h=u.get(n);if(c===void 0||h===void 0)for(var R=e.length,f=m.length;f<R;f+=1){var v,M=e[f],y=s(M);u.set(y,f);var H=(v=i.get(y))!==null&&v!==void 0?v:l;if(m[f]=(m[f-1]||0)+H,y===g&&(c=f),y===n&&(h=f),c!==void 0&&h!==void 0)break}return{top:m[c-1]||0,bottom:m[h]}};return S}var Ht=function(){function e(){Mt(this,e),I(this,"maps",void 0),I(this,"id",0),this.maps=Object.create(null)}return bt(e,[{key:"set",value:function(i,l){this.maps[i]=l,this.id+=1}},{key:"get",value:function(i){return this.maps[i]}}]),e}();function Tt(e,s,i){var l=t.useState(0),d=D(l,2),a=d[0],u=d[1],m=t.useRef(new Map),S=t.useRef(new Ht),b=t.useRef();function g(){V.cancel(b.current)}function n(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){m.current.forEach(function(v,M){if(v&&v.offsetParent){var y=xt(v),H=y.offsetHeight;S.current.get(M)!==H&&S.current.set(M,y.offsetHeight)}}),u(function(v){return v+1})};h?R():b.current=V(R)}function c(h,R){var f=e(h);m.current.get(f),R?(m.current.set(f,R),n()):m.current.delete(f)}return t.useEffect(function(){return g},[]),[c,n,S.current,a]}var Ct=14/15;function It(e,s,i){var l=t.useRef(!1),d=t.useRef(0),a=t.useRef(null),u=t.useRef(null),m,S=function(c){if(l.current){var h=Math.ceil(c.touches[0].pageY),R=d.current-h;d.current=h,i(R)&&c.preventDefault(),clearInterval(u.current),u.current=setInterval(function(){R*=Ct,(!i(R,!0)||Math.abs(R)<=.1)&&clearInterval(u.current)},16)}},b=function(){l.current=!1,m()},g=function(c){m(),c.touches.length===1&&!l.current&&(l.current=!0,d.current=Math.ceil(c.touches[0].pageY),a.current=c.target,a.current.addEventListener("touchmove",S),a.current.addEventListener("touchend",b))};m=function(){a.current&&(a.current.removeEventListener("touchmove",S),a.current.removeEventListener("touchend",b))},ge(function(){return e&&s.current.addEventListener("touchstart",g),function(){var n;(n=s.current)===null||n===void 0||n.removeEventListener("touchstart",g),m(),clearInterval(u.current)}},[e])}var Pt=10;function kt(e,s,i,l,d,a,u,m){var S=t.useRef(),b=t.useState(null),g=D(b,2),n=g[0],c=g[1];return ge(function(){if(n&&n.times<Pt){if(!e.current){c(function(T){return P({},T)});return}a();var h=n.targetAlign,R=n.originAlign,f=n.index,v=n.offset,M=e.current.clientHeight,y=!1,H=h,L=null;if(M){for(var W=h||R,X=0,x=0,B=0,$=Math.min(s.length-1,f),j=0;j<=$;j+=1){var A=d(s[j]);x=X;var q=i.get(A);B=x+(q===void 0?l:q),X=B}for(var J=W==="top"?v:M-v,k=$;k>=0;k-=1){var ne=d(s[k]),C=i.get(ne);if(C===void 0){y=!0;break}if(J-=C,J<=0)break}switch(W){case"top":L=x-v;break;case"bottom":L=B-M+v;break;default:{var Q=e.current.scrollTop,N=Q+M;x<Q?H="top":B>N&&(H="bottom")}}L!==null&&u(L),L!==n.lastTop&&(y=!0)}y&&c(P(P({},n),{},{times:n.times+1,targetAlign:H,lastTop:L}))}},[n,e.current]),function(h){if(h==null){m();return}if(V.cancel(S.current),typeof h=="number")u(h);else if(h&&Pe(h)==="object"){var R,f=h.align;"index"in h?R=h.index:R=s.findIndex(function(y){return d(y)===h.key});var v=h.offset,M=v===void 0?0:v;c({times:0,index:R,offset:M,originAlign:f})}}}function qe(e,s){var i="touches"in e?e.touches[0]:e;return i[s?"pageX":"pageY"]}var Je=t.forwardRef(function(e,s){var i=e.prefixCls,l=e.rtl,d=e.scrollOffset,a=e.scrollRange,u=e.onStartMove,m=e.onStopMove,S=e.onScroll,b=e.horizontal,g=e.spinSize,n=e.containerSize,c=e.style,h=e.thumbStyle,R=t.useState(!1),f=D(R,2),v=f[0],M=f[1],y=t.useState(null),H=D(y,2),L=H[0],W=H[1],X=t.useState(null),x=D(X,2),B=x[0],$=x[1],j=!l,A=t.useRef(),q=t.useRef(),J=t.useState(!1),k=D(J,2),ne=k[0],C=k[1],Q=t.useRef(),N=function(){clearTimeout(Q.current),C(!0),Q.current=setTimeout(function(){C(!1)},3e3)},T=a-n||0,ue=n-g||0,E=t.useMemo(function(){if(d===0||T===0)return 0;var z=d/T;return z*ue},[d,T,ue]),ee=function(w){w.stopPropagation(),w.preventDefault()},ae=t.useRef({top:E,dragging:v,pageY:L,startTop:B});ae.current={top:E,dragging:v,pageY:L,startTop:B};var ce=function(w){M(!0),W(qe(w,b)),$(ae.current.top),u(),w.stopPropagation(),w.preventDefault()};t.useEffect(function(){var z=function(ve){ve.preventDefault()},w=A.current,K=q.current;return w.addEventListener("touchstart",z),K.addEventListener("touchstart",ce),function(){w.removeEventListener("touchstart",z),K.removeEventListener("touchstart",ce)}},[]);var se=t.useRef();se.current=T;var Y=t.useRef();Y.current=ue,t.useEffect(function(){if(v){var z,w=function(ve){var oe=ae.current,Re=oe.dragging,pe=oe.pageY,we=oe.startTop;if(V.cancel(z),Re){var te=qe(ve,b)-pe,ie=we;!j&&b?ie-=te:ie+=te;var be=se.current,Me=Y.current,ze=Me?ie/Me:0,re=Math.ceil(ze*be);re=Math.max(re,0),re=Math.min(re,be),z=V(function(){S(re,b)})}},K=function(){M(!1),m()};return window.addEventListener("mousemove",w),window.addEventListener("touchmove",w),window.addEventListener("mouseup",K),window.addEventListener("touchend",K),function(){window.removeEventListener("mousemove",w),window.removeEventListener("touchmove",w),window.removeEventListener("mouseup",K),window.removeEventListener("touchend",K),V.cancel(z)}}},[v]),t.useEffect(function(){N()},[d]),t.useImperativeHandle(s,function(){return{delayHidden:N}});var U="".concat(i,"-scrollbar"),O={position:"absolute",visibility:ne?null:"hidden"},F={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return b?(O.height=8,O.left=0,O.right=0,O.bottom=0,F.height="100%",F.width=g,j?F.left=E:F.right=E):(O.width=8,O.top=0,O.bottom=0,j?O.right=0:O.left=0,F.width="100%",F.height=g,F.top=E),t.createElement("div",{ref:A,className:Ee(U,I(I(I({},"".concat(U,"-horizontal"),b),"".concat(U,"-vertical"),!b),"".concat(U,"-visible"),ne)),style:P(P({},O),c),onMouseDown:ee,onMouseMove:N},t.createElement("div",{ref:q,className:Ee("".concat(U,"-thumb"),I({},"".concat(U,"-thumb-moving"),v)),style:P(P({},F),h),onMouseDown:ce}))}),Ot=20;function Qe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=e/s*e;return isNaN(i)&&(i=0),i=Math.max(i,Ot),Math.floor(i)}var $t=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Nt=[],Yt={overflowY:"auto",overflowAnchor:"none"};function Ft(e,s){var i=e.prefixCls,l=i===void 0?"rc-virtual-list":i,d=e.className,a=e.height,u=e.itemHeight,m=e.fullHeight,S=m===void 0?!0:m,b=e.style,g=e.data,n=e.children,c=e.itemKey,h=e.virtual,R=e.direction,f=e.scrollWidth,v=e.component,M=v===void 0?"div":v,y=e.onScroll,H=e.onVirtualScroll,L=e.onVisibleChange,W=e.innerProps,X=e.extraRender,x=e.styles,B=yt(e,$t),$=t.useCallback(function(o){return typeof c=="function"?c(o):o==null?void 0:o[c]},[c]),j=Tt($),A=D(j,4),q=A[0],J=A[1],k=A[2],ne=A[3],C=!!(h!==!1&&a&&u),Q=t.useMemo(function(){return Object.values(k.maps).reduce(function(o,r){return o+r},0)},[k.id,k.maps]),N=C&&g&&(Math.max(u*g.length,Q)>a||!!f),T=R==="rtl",ue=Ee(l,I({},"".concat(l,"-rtl"),T),d),E=g||Nt,ee=t.useRef(),ae=t.useRef(),ce=t.useState(0),se=D(ce,2),Y=se[0],U=se[1],O=t.useState(0),F=D(O,2),z=F[0],w=F[1],K=t.useState(!1),fe=D(K,2),ve=fe[0],oe=fe[1],Re=function(){oe(!0)},pe=function(){oe(!1)},we={getKey:$};function te(o){U(function(r){var p;typeof o=="function"?p=o(r):p=o;var _=ct(p);return ee.current.scrollTop=_,_})}var ie=t.useRef({start:0,end:E.length}),be=t.useRef(),Me=_t(E,$),ze=D(Me,1),re=ze[0];be.current=re;var ye=t.useMemo(function(){if(!C)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!N){var o;return{scrollHeight:((o=ae.current)===null||o===void 0?void 0:o.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var r=0,p,_,Z,gt=E.length,Se=0;Se<gt;Se+=1){var Rt=E[Se],pt=$(Rt),Ke=k.get(pt),Ie=r+(Ke===void 0?u:Ke);Ie>=Y&&p===void 0&&(p=Se,_=r),Ie>Y+a&&Z===void 0&&(Z=Se),r=Ie}return p===void 0&&(p=0,_=0,Z=Math.ceil(a/u)),Z===void 0&&(Z=E.length-1),Z=Math.min(Z+1,E.length-1),{scrollHeight:r,start:p,end:Z,offset:_}},[N,C,Y,E,ne,a]),le=ye.scrollHeight,de=ye.start,he=ye.end,ke=ye.offset;ie.current.start=de,ie.current.end=he;var at=t.useState({width:0,height:a}),Oe=D(at,2),G=Oe[0],ot=Oe[1],it=function(r){ot({width:r.width||r.offsetWidth,height:r.height||r.offsetHeight})},$e=t.useRef(),Ne=t.useRef(),lt=t.useMemo(function(){return Qe(G.width,f)},[G.width,f]),ut=t.useMemo(function(){return Qe(G.height,le)},[G.height,le]),_e=le-a,Le=t.useRef(_e);Le.current=_e;function ct(o){var r=o;return Number.isNaN(Le.current)||(r=Math.min(r,Le.current)),r=Math.max(r,0),r}var Ye=Y<=0,Fe=Y>=_e,st=nt(Ye,Fe),De=function(){return{x:T?-z:z,y:Y}},He=t.useRef(De()),xe=Ge(function(o){if(H){var r=P(P({},De()),o);(He.current.x!==r.x||He.current.y!==r.y)&&(H(r),He.current=r)}});function We(o,r){var p=o;r?(Ue.flushSync(function(){w(p)}),xe()):te(p)}function ft(o){var r=o.currentTarget.scrollTop;r!==Y&&te(r),y==null||y(o),xe()}var Te=function(r){var p=r,_=f?f-G.width:0;return p=Math.max(p,0),p=Math.min(p,_),p},vt=Ge(function(o,r){r?(Ue.flushSync(function(){w(function(p){var _=p+(T?-o:o);return Te(_)})}),xe()):te(function(p){var _=p+o;return _})}),dt=Lt(C,Ye,Fe,!!f,vt),Xe=D(dt,2),Ce=Xe[0],Ve=Xe[1];It(C,ee,function(o,r){return st(o,r)?!1:(Ce({preventDefault:function(){},deltaY:o}),!0)}),ge(function(){function o(p){C&&p.preventDefault()}var r=ee.current;return r.addEventListener("wheel",Ce),r.addEventListener("DOMMouseScroll",Ve),r.addEventListener("MozMousePixelScroll",o),function(){r.removeEventListener("wheel",Ce),r.removeEventListener("DOMMouseScroll",Ve),r.removeEventListener("MozMousePixelScroll",o)}},[C]),ge(function(){if(f){var o=Te(z);w(o),xe({x:o})}},[G.width,f]);var Be=function(){var r,p;(r=$e.current)===null||r===void 0||r.delayHidden(),(p=Ne.current)===null||p===void 0||p.delayHidden()},je=kt(ee,E,k,u,$,function(){return J(!0)},te,Be);t.useImperativeHandle(s,function(){return{getScrollInfo:De,scrollTo:function(r){function p(_){return _&&Pe(_)==="object"&&("left"in _||"top"in _)}p(r)?(r.left!==void 0&&w(Te(r.left)),je(r.top)):je(r)}}}),ge(function(){if(L){var o=E.slice(de,he+1);L(o,E)}},[de,he,E]);var ht=Dt(E,$,k,u),mt=X==null?void 0:X({start:de,end:he,virtual:N,offsetX:z,offsetY:ke,rtl:T,getSize:ht}),St=wt(E,de,he,f,q,n,we),me=null;a&&(me=P(I({},S?"height":"maxHeight",a),Yt),C&&(me.overflowY="hidden",f&&(me.overflowX="hidden"),ve&&(me.pointerEvents="none")));var Ae={};return T&&(Ae.dir="rtl"),t.createElement("div",et({style:P(P({},b),{},{position:"relative"}),className:ue},Ae,B),t.createElement(tt,{onResize:it},t.createElement(M,{className:"".concat(l,"-holder"),style:me,ref:ee,onScroll:ft,onMouseEnter:Be},t.createElement(rt,{prefixCls:l,height:le,offsetX:z,offsetY:ke,scrollWidth:f,onInnerResize:J,ref:ae,innerProps:W,rtl:T,extra:mt},St))),N&&le>a&&t.createElement(Je,{ref:$e,prefixCls:l,scrollOffset:Y,scrollRange:le,rtl:T,onScroll:We,onStartMove:Re,onStopMove:pe,spinSize:ut,containerSize:G.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),N&&f>G.width&&t.createElement(Je,{ref:Ne,prefixCls:l,scrollOffset:z,scrollRange:f,rtl:T,onScroll:We,onStartMove:Re,onStopMove:pe,spinSize:lt,containerSize:G.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Wt=t.forwardRef(Ft);Wt.displayName="List";export{Wt as L};
